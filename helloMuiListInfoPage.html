<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<script src="js/mui.js" type="text/javascript" charset="utf-8"></script>
		<!--标准mui.css-->
		<link rel="stylesheet" type="text/css" href="css/mui.css" />

		</style>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(function() {

				//监听自定义事件，获取新闻详情
				document.addEventListener('get_detail', function(event) {

					var guid = event.detail.guid;
					if(!guid) {
						return;
					}
					//前页传入的数据，直接渲染，无需等待ajax请求详情后

					var cover = event.detail.cover;
					var title = event.detail.title;
					var author = event.detail.author;
					var time = event.detail.time;
					document.getElementById('cover').innerText = cover + title + author + time;

					plus.webview.currentWebview().show();

					//向服务端请求文章详情内容
					mui.ajax('http://192.168.1.116:8002/Manage/ManagerView/Ashx/plusApp.ashx', {
						type: 'GET',
						dataType: 'json', //服务器返回json格式数据
						timeout: 15000, //15秒超时
						success: function(rsp) {
							document.getElementById('coverAjax').innerText = JSON.stringify(rsp);
							//mui.alert(JSON.stringify(rsp));

						},
						error: function(xhr, type, errorThrown) {
							mui.toast('获取文章内容失败');
							//TODO 此处可以向服务端告警
						}
					});
				});

				mui.back = function() {
					plus.webview.currentWebview().hide("auto", 300);
				}
				//窗口隐藏时， 重置页面数据
				var self = plus.webview.currentWebview();
				self.addEventListener("hide", function(e) {

					//					alert("返回");
					//					mui('#my_list').scroll().scrollToBottom();
					//					mui('#my_list').scroll().scrollTo(0, 0, 100); //100毫秒滚动到顶
					//					mui('.mui-content').pullRefresh().scrollTo(0, 0, 1000); //滚动到顶部
					//					window.scrollTo(0, 1000);
					//					window.scrollTo(0,0);
					//					window.scrollTo(0, 0); //重置滚动条位置
					//vm.resetData(); //重置页面数据
					//					mui.scrollTop();
					//mui('.mui-content').scroll().scrollTo(0, 0, 100); //100毫秒滚动到顶

				}, false);

			});
		</script>
	</head>

	<body>

		<div class="mui-content">
			<header class="mui-bar mui-bar-nav">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
				<h1 class="mui-title">打开新页面</h1>

			</header>

			<ul class="mui-table-view" id="my_list">
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle" id="cover">
						待办事项0
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项1
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项2
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle" id="coverAjax">
						待办事项5
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项3
					</div>
				</li>
				<li class="mui-table-view-cell">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red">删除</a>
					</div>
					<div class="mui-slider-handle">
						待办事项4
					</div>
				</li>
			</ul>
		</div>

	</body>

</html>